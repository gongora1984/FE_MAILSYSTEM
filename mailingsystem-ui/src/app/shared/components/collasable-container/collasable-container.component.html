<ng-container [ngTemplateOutlet]="onlyExpansionPanel? matExpansionPanel: matMatAccordion"></ng-container>

<ng-template #matMatAccordion>
  <mat-accordion multi="true">
    <ng-container [ngTemplateOutlet]="matExpansionPanel"></ng-container>
  </mat-accordion>
</ng-template>


<ng-template #matExpansionPanel>
  <mat-expansion-panel [expanded]="isExpanded" [ngClass]="isGray ? 'mat-elevation-z0' : 'mat-elevation-z5'"
                       [class.backgroungGrey]="isGray" (opened)="onOpenPanel()" (closed)="onClosePanel()">
    <mat-expansion-panel-header>
      <div (click)="stopPropagation ? $event.stopPropagation() : null"
           style="width: 100%; height: 100%; padding: 1rem 1rem 1rem 0.5rem">
        <mat-panel-title style="white-space: nowrap">
          <strong>{{header + " "}}</strong><span *ngIf="data">&nbsp; - {{data}}</span>

          <span class="example-spacer"></span>

          <div *ngIf="isCheckable">
            <mat-checkbox class="example-margin" color="primary" (click)="$event.stopPropagation()" [checked]="active">
              Active
            </mat-checkbox>
          </div>
        </mat-panel-title>
      </div>
    </mat-expansion-panel-header>

    <div *ngIf="!isGray">
      <mat-divider></mat-divider>
    </div>

    <ng-content *ngTemplateOutlet="content"></ng-content>

  </mat-expansion-panel>
</ng-template>

